# PhotoWatermark2
AI4SE homework2

## 功能特性

### 图片导入功能
- **单张图片导入**：通过文件对话框选择单张图片
- **批量图片导入**：一次性选择多张图片导入
- **文件夹导入**：导入整个文件夹中的所有图片
- **拖拽导入**：直接将图片文件拖拽到应用程序窗口或图片列表区域

### 图片导出功能
- **单张图片导出**：导出当前选中的图片
- **批量图片导出**：一次性导出所有已导入的图片
- **输出格式选择**：支持JPEG和PNG格式
- **文件命名规则**：自定义前缀和后缀
- **JPEG质量调节**：0-100质量滑块控制
- **图片尺寸调整**：
  - 按宽度缩放（保持宽高比）
  - 按高度缩放（保持宽高比）
  - 按百分比缩放（1%-500%）

### 支持的图片格式
- JPEG (.jpg, .jpeg)
- PNG (.png)
- BMP (.bmp)
- TIFF (.tif, .tiff)

### 拖拽功能使用说明
1. **拖拽到窗口**：将图片文件直接拖拽到应用程序窗口的任何位置
2. **拖拽到列表**：将图片文件拖拽到左侧的图片列表区域
3. **视觉反馈**：拖拽时列表区域会显示蓝色虚线边框
4. **格式检查**：自动过滤不支持的图片格式

### 使用方法
1. 运行 `python run.py` 启动应用程序
2. 使用以下任一方式导入图片：
   - 点击"导入单张"、"导入多张"或"导入文件夹"按钮
   - 直接将图片文件拖拽到应用程序窗口
3. 在左侧列表中选择图片进行预览
4. 图片信息将显示在右侧预览区域
5. 在右侧导出设置区域配置导出选项：
   - 选择输出格式（JPEG/PNG）
   - 设置文件命名规则（前缀/后缀）
   - 调节JPEG质量（0-100）
   - 选择图片缩放方式（宽度/高度/百分比）
   - 点击"导出当前图片"或"导出所有图片"按钮

## 项目结构

```
PhotoWatermark2/
 ├── main.py # 主程序入口
 ├── run.py # 启动脚本
 ├── requirements.txt # 依赖列表
 ├── requirements.md # 需求规格说明
 ├── core/ # 核心功能模块 
 │ ├── image_processor.py # 图像处理 
 │ └── image_manager.py # 图片管理 
 ├── ui/ # 用户界面 
 │ └── main_window.py # 主窗口 
 └── utils/ # 工具函数 
 └── logger.py # 日志配置
```


## 开发进度
- [x] 项目结构和需求分析
- [x] 图片导入功能实现
- [x] 图片导出功能实现
- [ ] 水印功能开发
- [ ] 测试和优化

## 使用说明

### 拖拽导入功能
1. 从文件资源管理器中选择一张或多张图片文件
2. 直接拖拽到应用程序窗口或图片列表区域
3. 系统会自动识别支持的图片格式并导入
4. 拖拽时会有视觉反馈（蓝色虚线边框）

### 文件选择器导入
- 点击"导入单张"按钮选择单张图片
- 点击"导入多张"按钮选择多张图片
- 点击"导入文件夹"按钮选择整个文件夹

### 图片导出功能
1. **单张图片导出**：
   - 在左侧列表中选择要导出的图片
   - 在右侧导出设置区域配置导出选项
   - 点击"导出当前图片"按钮
   - 选择输出目录，确认导出

2. **批量图片导出**：
   - 确保已导入多张图片
   - 在右侧导出设置区域配置导出选项
   - 点击"导出所有图片"按钮
   - 选择输出目录，系统将批量处理所有图片

3. **导出选项说明**：
   - **输出格式**：JPEG（有损压缩）或PNG（无损压缩，支持透明通道）
   - **文件命名**：前缀 + 原文件名 + 后缀 + 扩展名
   - **JPEG质量**：数值越高，图片质量越好，文件越大
   - **图片缩放**：
     - 宽度缩放：按指定宽度缩放，高度按比例调整
     - 高度缩放：按指定高度缩放，宽度按比例调整
     - 百分比缩放：按百分比缩放图片尺寸（1%-500%）

## 技术特性
- **用户友好界面**：直观的拖拽操作和清晰的预览显示
- **错误处理**：完善的异常处理和用户提示
- **性能优化**：批量处理时显示进度条，避免界面卡顿
- **格式兼容**：支持多种常见图片格式
- **尺寸调整**：灵活的图片缩放选项，保持图片质量